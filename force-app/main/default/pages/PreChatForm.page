<apex:page showHeader="false" standardStylesheets="false">
<style type="text/css">

    body {
        padding: 0px;
        margin: 0px;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 13px;
    }
    
    #preChatHeader {
        border-radius: 3px 3px 0px 0px;
        display:inline-block;
        background-color: #ff7110;
        text-align: center;
        height: 24px;
        line-height: 24px;
        font-weight: bold;
        color: #ffeadb;
        width: 100%;
    }
    
    #preChatContainer {
        display: block;
        width: 100%;
        text-align: center;
        padding-top: 4px;
    }
    
    #preChatForm {
        display: inline-block;
        text-align: left;
    }
    
    #preChatSubHeader, #messageText {
        float: left;
        margin: 8px;
        padding-left: 4px;
        padding-right: 4px;
        font-weight: bold;
        color: #666;
    }
    
    input[type=text], input[type=email] {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 13px;
        width: 90%;
        padding-left: 4px;
        padding-right: 4px;
        display: inline-block;
        box-shadow: none;
        margin-top: 3px;
        margin-bottom: 3px;
        border: 1px solid;
        border-radius: 4px;
        border-color: #D3D3D3;
        color: #4D4D4D;
        height: 24px;
    }
    
    input:hover, textarea:hover, input:focus, textarea:focus {
        outline: none;
        border-color: orange;
    }
    
    textarea {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 13px;
        margin-right: 0px;
        margin-top: 3px;
        margin-bottom: 3px;
        border: 1px solid;
        border-radius: 4px;
        border-color: #D3D3D3;
        box-shadow: none;
        text-indent: 0;
        padding: 4px;
        color: #4D4D4D;
        resize: vertical;
        overflow: auto;
        width: 90%;
        max-height: 112px;
    }
    
    #submitBtn {
        display: block;
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        margin: 0 auto;
        margin-top: 10px;
        padding: 4px;
        text-align: center;
        border: 1px solid #ff8c00;
        border-radius: 4px;
        color: #ffffff;
        background-color: #ff7110;
        width: 70%;
        height: 30px;
        font-weight: bold;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 13px;
        cursor: pointer;
    }
    
    #submitButton {
        height: 22px;
        line-height: 22px;
    }
    
    #submitBtn:hover {
        cursor: pointer;
    }
    
    input:-webkit-autofill, textarea:-webkit-autofill {
        border-color: #D3D3D3;
        -webkit-text-fill-color: #4D4D4D;
        -webkit-box-shadow: 0 0 0px 1000px #FFF inset;
        transition: background-color 5000s ease-in-out 0s;
        font-family: Verdana, Geneva, sans-serif;
    }
    
    input:-webkit-autofill:hover, 
    input:-webkit-autofill:focus,
    textarea:-webkit-autofill:hover,
    textarea:-webkit-autofill:focus {
        border-color: orange;
        -webkit-text-fill-color: #ff7110;
        -webkit-box-shadow: 0 0 0px 1000px #FFF inset;
        transition: background-color 5000s ease-in-out 0s;
        font-family: Verdana, Geneva, sans-serif;
    }  

</style>


<script type="text/javascript">
(function() { 
  function handlePageLoad() {
    var endpointMatcher = new RegExp("[\\?\\&]endpoint=([^&#]*)");
    document.getElementById('prechatForm').setAttribute('action',
    decodeURIComponent(endpointMatcher.exec(document.location.search)[1]));
  } 
  if (window.addEventListener) {
    window.addEventListener('load', handlePageLoad, false);
  } else { 
    window.attachEvent('onload', handlePageLoad, false);
  }
})(); 
</script>

<div id="preChatHeader">
Chat Support
</div>

<div id="preChatContainer">
<form id="prechatForm" method="post">

<p id="preChatSubHeader">Introduce yourself</p>
<div id="preChatFields">
<input id="fullName" name="liveagent.prechat:Name" type="hidden" />
<input id="firstName" placeholder="First Name*" name="liveagent.prechat:FirstName" type="text" style="border-style: 2px solid" required="true" /><br />
<input id="lastName" placeholder="Last Name*" name="liveagent.prechat:LastName" type="text" required="true" /><br />
<input id="email" placeholder="Email*" name="liveagent.prechat:Email" type="email" required="true"  /><br />
<p id="messageText">Message* </p>
<textarea name="liveagent.prechat:Message" id="message" form="prechatForm" rows="5" cols="60" maxlength="254" required="true" ></textarea><br />
<input id="casenumber" placeholder="Case Number" name="liveagent.prechat:Case Number" type="text" />
</div>


<input type="hidden" name= "liveagent.prechat.save:Email" value= "Email_Address__c" />
<input type="hidden" name= "liveagent.prechat.save:Message" value= "Subject__c" />
<input type="hidden" name= "liveagent.prechat.save:Case Number" value= "Case_Number__c" />
<input type="hidden" name= "liveagent.prechat.save:Name" id="liveagent.prechat.save:FullName" value= "Name__c" />

<input type="hidden" name="liveagent.prechat:Status" value="New" />
<input type="hidden" name="liveagent.prechat:CaseOrigin" value="Chat" />
<!-- Sets case record type for the org -->
<input type="hidden" name="liveagent.prechat:CaseRecordType" value="0121B000001hgNaQAI" />


<!-- Lookup client record -->
<input type="hidden" name="liveagent.prechat.findorcreate.map:Case"
value="Subject,Message;Origin,CaseOrigin;RecordTypeId,CaseRecordType;CaseNumber,CaseNumber;"/>
<input type="hidden" name="liveagent.prechat.findorcreate.map:PGi_Client__c"
value="Client_Email__c,Email;" />

<!-->
<input type="hidden" name="liveagent.prechat.findorcreate.map.doFind:Case"
value="CaseNumber,true" />
<input type="hidden" name="liveagent.prechat.findorcreate.map.doFind:PGi_Client__c"
value="Client_Email__c,true" />


<input type="hidden" name="liveagent.prechat.findorcreate.map.isExactMatch:PGi_Client__c"
value="Client_Email__c,true;" />
<input type="hidden" name="liveagent.prechat.findorcreate.map.isExactMatch:Case"
value="CaseNumber,true;" />

<input type="hidden" name="liveagent.prechat.findorcreate.map.doCreate:Case"
value="Status,true" />
<!--<input type="hidden" name="liveagent.prechat.findorcreate.linkToEntity:PGi_Client__c"
value="Case,PGi_Client__c" />
<-->


<input type="hidden" name="liveagent.prechat.findorcreate.saveToTranscript:PGi_Client__c"
value="PGi_Client__c" />
<input type="hidden" name="liveagent.prechat.findorcreate.saveToTranscript:Case"
value="CaseId" />

<input type="hidden" name="liveagent.prechat.findorcreate.showOnCreate:PGi_Client__c"
value="false" />
<input type="hidden" name="liveagent.prechat.findorcreate.showOnCreate:Case"
value="true" />

<!-- Lookup case record -->




<div id="submitButton">
<input id="submitBtn" onclick="setName(); saveVars();" type="submit" value="Start chat" />
</div>


<input name="liveagent.prechat.findorcreate.displayToAgent:FirstName" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:LastName" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:Email" type="hidden" value="true" />
<input name="liveagent.prechat.findorcreate.displayToAgent:Message" type="hidden" value="true" />
<input name="liveagent.prechat.findorcreate.displayToAgent:CaseOrigin" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:CaseRecordType" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:Case Number" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:Status" type="hidden" value="false" />
<input name="liveagent.prechat.findorcreate.displayToAgent:Name" type="hidden" value="true" />


</form>
</div>

<script type="text/javascript">
   function setName() {
        document.getElementById("fullName").value =  
            document.getElementById("firstName").value + " " + document.getElementById("lastName").value;
    
        document.getElementById("liveagent.prechat.save:FullName").value = "Name__c";
    }
    
    
<!-- save inputs to session storage to auto create case for missed chats -->    
       function saveVars() { 
       sessionStorage.clear();
       sessionStorage.setItem("fullName", document.getElementById("fullName").value);
       sessionStorage.setItem("Email", document.getElementById("email").value);
       sessionStorage.setItem("caseNumber", document.getElementById("casenumber").value);
       sessionStorage.setItem("Description", document.getElementById("message").value);
    }
    
</script>

</apex:page>