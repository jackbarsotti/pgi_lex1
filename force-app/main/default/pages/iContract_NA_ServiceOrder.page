<!-- RT-281   Anup -->
<apex:page standardController="CONMAN_Contract__c" extensions="iContract_NA_Master_Controller" >
    <!-- Top of Agreement: Logo & eSignature ID -->
    <apex:image rendered="{! !renderingAsWord }" id="PGilogo" url="{!$Resource.PGILogoSmall}" height="36px" width="36px" />
    <apex:image rendered="{! renderingAsWord }" url="https://c.na68.content.force.com/servlet/servlet.ImageServer?id=01513000002iSUv&oid=00D30000001H6BZ&lastMod=1469808329000"
        height="36px" width="36px" />
    <span style="color:#fff">{{transstamp1_es_:transactionid}}</span>

    <apex:form id="wholeAgreementForm">
        <!-- <apex:actionFunction action="{!saveSO}" name="savebtn" /> -->
        <!-- Persistent Save/Cancel buttons for the rest of the page -->
        <apex:outputPanel rendered="{! renderingAsHtml  && (canEditVerbiage || canEditPricing)}">
            <div id="floatingButtons">
                <apex:commandButton value="Save" action="{!save}" id="saveButton" />
                <br />
                <apex:commandButton value="Cancel" action="{!cancel}" id="cancelButton" />
            </div>
        </apex:outputPanel>

        <table>
            <tr>
                <td style="border: none; width: 65%;">
                    <h1>
                        GlobalMeet Webcast Service Order
                    </h1>
                </td>
                <td id="pgiAddress" style="border: none;" class="right">{! pgiAddress }</td>
            </tr>

        </table>
        <table>
            <tr>
                <tr>
                    <td style="border: none;font-weight:bold;width:15%;">Service Order #:</td>
                    <td style="border: none;">{! contract.Name}</td>
                </tr>
                <td style="border: none;font-weight:bold;width:15%;">Date:</td>

                <td style="border: none;">
                    <!-- When the Contact Mailing Country is in USA or Canada Date will display in MM/DD/YY format-->
                    <apex:outputPanel rendered="{!isUSA}">
                        <apex:outputText value="{0,date,MM/dd/YYYY}">
                            <apex:param value="{!today()}" /> </apex:outputText>
                    </apex:outputPanel>
                    <!-- When the Contact Mailing Country is NOT in USA or Canada Date will display in DD/MM//YY format-->
                    <apex:outputPanel rendered="{!Not(isUSA)}">
                        <apex:outputText value="{0,date,dd/MM/YYYY}">
                            <apex:param value="{!today()}" /> </apex:outputText>
                    </apex:outputPanel>
                </td>
            </tr>
            <tr>
                <td style="border: none;font-weight:bold;width:15%;">Expiration date:</td>
                <td style="border: none;">
                    <!-- When the Contact Mailing Country is in USA or Canada Date will display in MM/DD/YY format-->
                    <apex:outputPanel rendered="{!isUSA}">
                        <apex:outputText value="{0,date,MM/dd/yyyy}">
                            <apex:param value="{!today() + 30}" /> </apex:outputText>
                    </apex:outputPanel>
                    <!-- When the Contact Mailing Country is NOT in USA or Canada Date will display in DD/MM//YY format-->
                    <apex:outputPanel rendered="{!Not(isUSA)}">
                        <apex:outputText value="{0,date,dd/MM/YYYY}">
                            <apex:param value="{!today() + 30}" /> </apex:outputText>
                    </apex:outputPanel>
                </td>
            </tr>
        </table>


        <!-- Sales Rep's and Customer's Information -->
        <apex:composition template="iContract_NA_RepCustomerInfo" rendered="{! isPageRenderable }"></apex:composition>
        <br/>
        <hr />

        <apex:outputPanel rendered="{! isAssociated }">
            This Service Order incorporates by reference that {! contract.Associated_SLO_Name__c} dated &nbsp;
            <!-- When the Contact Mailing Country is in USA or Canada Date will display in MM/DD/YY format-->
            <apex:outputPanel rendered="{!isUSA}">
                <apex:outputText value="{0,date,MM/dd/YYYY}">
                    <apex:param value="{! contract.Associated_SLO_Date__c}" /> </apex:outputText>
            </apex:outputPanel>
            <!-- When the Contact Mailing Country is NOT in USA or Canada Date will display in DD/MM//YY format-->
            <apex:outputPanel rendered="{!Not(isUSA)}">
                <apex:outputText value="{0,date,dd/MM/YYYY}">
                    <apex:param value="{! contract.Associated_SLO_Date__c}" /> </apex:outputText>
            </apex:outputPanel> and is governed thereby.
        </apex:outputPanel>

        <!-- Editable Terms and Conditions that are shown in a table -->
        <table>
            <col width="12%" />
            <col width="88%" />
            <apex:repeat value="{!sortedTableContractVerbiage}" var="tv">
                <tr>
                    <td class='right td-header dark'>
                        <apex:outputText escape="false" value="{!tv.contractVerbiage.Verbiage_Header__c}" />:</td>
                    <td id='{!tv.originalId}' name='{!tv.contractVerbiage.Name}' width="85%" class="verbiage front-page-table-verbiage {!IF (tv.isCustomVerbiage && renderingAsHTML, 'highlightOverride', '')}">
                        <apex:outputField value="{!tv.contractVerbiage.Verbiage__c}">
                            <apex:inlineEditSupport event="ondblClick" rendered="{! canEditVerbiage || (canEditPricing && tv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                            />
                        </apex:outputField>
                        <apex:outputPanel rendered="{! !renderingAsPDF }" styleClass="verbiage-comments">
                            <apex:outputField value="{!tv.contractVerbiage.Comments__c}" rendered="{! (renderingAsHtml && (canEditVerbiage || (canEditPricing && tv.contractVerbiage.Pricing_Team_Changes_Allowed__c))) || (renderingAsWord && !(tv.contractVerbiage.Comments__c == '' || tv.contractVerbiage.Comments__c == null))}">
                                <apex:outputPanel layout="none" rendered="{! (canEditVerbiage || (canEditPricing && tv.contractVerbiage.Pricing_Team_Changes_Allowed__c)) && renderingAsHtml && (tv.contractVerbiage.Comments__c == '' || tv.contractVerbiage.Comments__c == null)}">
                                    Insert comments here...
                                </apex:outputPanel>
                                <apex:inlineEditSupport event="onClick" rendered="{! canEditVerbiage || (canEditPricing && tv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                                />
                            </apex:outputField>
                        </apex:outputPanel>
                    </td>
                </tr>
            </apex:repeat>
        </table>
        <!-- Editable first Page Verbiage. Editable Terms and Conditions on the front-page. Editable Billing. -->
        <apex:repeat value="{!firstPageVerbiage}" var="fpv">
            <div id='{!fpv.originalId}' name='{!fpv.contractVerbiage.Name}' class="verbiage front-page-verbiage {!IF (fpv.isCustomVerbiage && renderingAsHTML, 'highlightOverride', '')}">
                <apex:outputPanel rendered="{!fpv.contractVerbiage.Show_Verbiage_Header__c == true}">
                    <h6>
                        <apex:outputField value="{!fpv.contractVerbiage.Verbiage_Header__c}">
                        </apex:outputField>
                    </h6>
                </apex:outputPanel>
                <apex:outputField value="{!fpv.contractVerbiage.Verbiage__c}">
                    <apex:inlineEditSupport event="ondblClick" rendered="{! canEditVerbiage || (canEditPricing && fpv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                    />
                </apex:outputField>
                <apex:outputPanel rendered="{! !renderingAsPDF }" styleClass="verbiage-comments">
                    <apex:outputField value="{!fpv.contractVerbiage.Comments__c}" rendered="{! (renderingAsHtml && (canEditVerbiage || (canEditPricing && fpv.contractVerbiage.Pricing_Team_Changes_Allowed__c))) || (renderingAsWord && !(fpv.contractVerbiage.Comments__c == '' || fpv.contractVerbiage.Comments__c == null))}">
                        <apex:outputPanel layout="none" rendered="{! (canEditVerbiage || (canEditPricing && fpv.contractVerbiage.Pricing_Team_Changes_Allowed__c)) && renderingAsHtml && (fpv.contractVerbiage.Comments__c == '' || fpv.contractVerbiage.Comments__c == null)}">
                            Insert comments here...
                        </apex:outputPanel>
                        <apex:inlineEditSupport event="onClick" rendered="{! canEditVerbiage || (canEditPricing && fpv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                        />
                    </apex:outputField>
                </apex:outputPanel>
            </div>
        </apex:repeat>
        <!-- End -->
        <br/>

        <!-- <table>
            <col width="12%" />
            <col width="88%" />
            <apex:repeat value="{!serviceOrderVerbiage}" var="serviceVerbiage">
                <tr>
                    <td>        
                        <h6> {!serviceVerbiage.Header__c}</h6>                        
                    </td>
                    <td class="verbiage front-page-table-verbiage {!IF (renderingAsHTML, 'highlightOverride', '')}">
                            <apex:outputField value="{!serviceVerbiage.Content_RTF__c}" />
                    </td>
                </tr>
            </apex:repeat>
        </table> <br/> -->




        <!--  Editable Rates section only for the Pricing team -->
        <apex:outputPanel rendered="{! renderingAsHTML && canEditPricing }">
            <table id="subscriptionTable">
                <col width="25%" />
                <col width="25%" />
                <col width="5%" />
                <col width="15%" />
                <col width="13%" />
                <col width="17%" />

                <tr>
                    <th class="center dark">Item</th>
                    <th class="center dark">Description</th>
                    <th class="center dark">Quantity</th>
                    <th class="center dark">Unit Price</th>
                    <th class="center dark">Subscription Term</th>
                    <th class="center dark">Total</th>
                </tr>

                <apex:repeat value="{!licenseData}" var="ld">
                    <apex:repeat value="{!ld.subscriptions}" var="sub">
                        <tr id='{!sub.id}_row' class="subs" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="subs-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center subs-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center subs-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center subs-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center subs-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center subs-table-total">{!sub.tsf}</td>
                        </tr>
                    </apex:repeat>
                    <apex:repeat value="{!ld.commitments}" var="sub">
                        <tr id='{!sub.id}_row' class="commit" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="commit-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center commit-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center commit-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center commit-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center commit-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center commit-table-total">{!sub.tsf}</td>
                        </tr>
                    </apex:repeat>
                    <apex:repeat value="{!ld.oneTimeCharges}" var="sub">
                        <tr id='{!sub.id}_row' class="once" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="once-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center once-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center once-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center once-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center once-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center once-table-total">{!sub.totc}</td>
                        </tr>
                    </apex:repeat>
                </apex:repeat>


                <apex:repeat value="{!licenseData}" var="lic">
                    <tr id="{!lic.id}" class="{!IF (!lic.hasRates && !lic.hasAccessTypes, 'hide', '')} {!IF (lic.isDisabled, 'disabled', '')}">
                        <td colspan="6" class="rate-list-header {!IF (lic.isCustomName, 'highlightOverride', '')}">
                            <h3 id="{!lic.id}">
                                <apex:outputField value="{!lic.licenseSet.Product_Name__c}">
                                    <!-- <apex:inlineEditSupport event="ondblClick" rendered="{!canEditPricing}" />  -->
                                </apex:outputField>
                            </h3>

                            <!-- A button to toggle this License Set -->
                            <!-- <apex:commandLink value="Toggle Rate Section" action="{!deleteLicenseSet}" rendered="{!canEditPricing}" rerender="wholeServiceOrderForm">
                                <apex:param name="actOnLicenseSetId" value="{!lic.id}" assignTo="{!actOnLicenseSetId}"/>
                            </apex:commandLink> -->
                            <br />

                            <!-- A button to add another Rate to this License Set -->
                            <!-- <apex:commandLink value="+ Add Rate" action="{!addRateToLicenseSet}" rendered="{!canEditPricing}" rerender="wholeServiceOrderForm">
                                <apex:param name="actOnLicenseSetId" value="{!lic.id}" assignTo="{!actOnLicenseSetId}"/>
                            </apex:commandLink> -->
                        </td>
                    </tr>

                    <apex:repeat value="{!lic.rateGroupOrder}" var="rtg">
                        <!-- Standard Rate List -->
                        <apex:repeat value="{!lic.rateGroups[rtg].rates}" var="rt">
                            <tr id='{!rt.id}_row' data-associatedrate="{!rt.associatedRate.Id}" class="rate-list-row {!IF (lic.isDisabled || rt.isDisabled, 'disabled', '')}">

                                <td class="rate-list-name {!IF (rt.isCustomName, 'highlightOverride', '')}">
                                    <!-- Toggle Link -->
                                    <!-- <apex:commandLink value="Toggle" action="{!deleteRateFromLicenseSet}" rendered="{! canEditPricing && !lic.isDisabled }" rerender="wholeServiceOrderForm">
                                        <apex:param name="actOnLicenseSetId" value="{!lic.id}" assignTo="{!actOnLicenseSetId}"/>
                                        <apex:param name="actOnAssociatedRateId" value="{!rt.id}" assignTo="{!actOnAssociatedRateId}"/>
                                    </apex:commandLink> -->

                                    <!-- Standard Editable Rate Name -->
                                    <apex:outputField value="{!rt.associatedRate.Rate_Name__c}">
                                        <!-- <apex:inlineEditSupport event="ondblClick" rendered="{!canEditPricing}" />  -->
                                    </apex:outputField>
                                </td>

                                <!-- Editable Description -->
                                <td class="rate-list-description rate-list-description-editable {!IF (rt.isCustomDescription, 'highlightOverride', '')}">
                                    <apex:inputField value="{!rt.associatedRate.Description__c}">
                                        <!-- <apex:inlineEditSupport event="ondblClick" rendered="{!canEditPricing}" /> -->
                                    </apex:inputField>
                                </td>
                                <!-- Quantity__c -N/A-->
                                <td class="center rate-list-qty">{!rt.associatedRate.Quantity__c}</td>

                                <!-- Editable Price and Recurrence -->
                                <td class="center rate-list-rate-editable rate-list-recurrence-editable {!IF (rt.isOverridden || rt.isCustomRecurrence, 'highlightOverride', '')}">
                                    <apex:outputField value="{!rt.associatedRate.CurrencyIsoCode}"></apex:outputField>
                                    <apex:outputField value="{!rt.associatedRate.Override__c}">

                                        <!-- Override is only set if it's overridden, so show the Default price in that case -->
                                        <apex:outputField rendered="{!rt.associatedRate.Override__c == null}" value="{!rt.associatedRate.Default__c}">
                                        </apex:outputField>

                                        <!-- <apex:inlineEditSupport event="ondblClick" rendered="{!canEditPricing}" /> -->
                                    </apex:outputField>
                                    {!IF (rt.isOverridden, ' ('+rt.originalRate+')', '')} /
                                    <apex:outputField value="{!rt.associatedRate.Recurrence__c}">
                                        <!-- <apex:inlineEditSupport event="ondblClick" rendered="{!canEditPricing}" />  -->
                                    </apex:outputField>
                                </td>
                                <!-- N/A -->
                                <td class="center rate-list-term">{!termLength}</td>
                                <td class="center rate-list-total">N/A</td>
                            </tr>
                        </apex:repeat>
                    </apex:repeat>

                    <apex:repeat value="{!lic.accessTypeOrder}" var="rtg">
                        <!-- International -->
                        <apex:repeat value="{!lic.accessTypes[rtg].gridData}" var="gridRates">
                            <apex:repeat value="{!gridRates.locationOrders}" var="loc">
                                <apex:repeat value="{!gridRates.accessTypes}" var="at">
                                    <apex:outputPanel layout="none" rendered="{! gridRates.hasGridData[loc][at] }">
                                        <tr class="rate-list-intl-row" data-location="{!loc}" data-accesstype="{!at}" data-associatedrate="{!gridRates.locations[loc][at].id}"
                                            id="{!gridRates.locations[loc][at].id}_row">
                                            <td id="{!gridRates.locations[loc][at].id}" class="rate-list-name">
                                                <!-- Access Type Rate Name -->
                                                {!at}
                                            </td>

                                            <!-- Access Type Description -->
                                            <td id="{!gridRates.locations[loc][at].id}_desc" class="rate-list-description">
                                                {!loc}
                                            </td>

                                            <td class="center rate-list-qty">N/A</td>

                                            <!-- Editable Price and Recurrence -->
                                            <td class="center rate-list-rate-editable rate-list-recurrence {!IF (gridRates.locations[loc][at].isOverridden || gridRates.locations[loc][at].isCustomRecurrence, 'highlightOverride', '')}"
                                                id="{!gridRates.locations[loc][at].id}_rate">
                                                <apex:outputField value="{!gridRates.locations[loc][at].associatedRate.CurrencyIsoCode}"></apex:outputField>
                                                <apex:outputField value="{!gridRates.locations[loc][at].associatedRate.Override__c}">

                                                    <!-- Override is only set if it's overridden, so show the Default price in that case -->
                                                    <apex:outputField rendered="{!gridRates.locations[loc][at].associatedRate.Override__c == null}" value="{!gridRates.locations[loc][at].associatedRate.Default__c}">
                                                    </apex:outputField>

                                                </apex:outputField>
                                                / Minute {!IF (gridRates.locations[loc][at].isOverridden, ' ('+gridRates.locations[loc][at].originalRate+')', '')}
                                            </td>

                                            <td class="center rate-list-term">N/A</td>
                                            <td class="center rate-list-total">N/A</td>
                                        </tr>
                                    </apex:outputPanel>
                                </apex:repeat>
                            </apex:repeat>
                        </apex:repeat>
                    </apex:repeat>
                </apex:repeat>
                <!-- A button to add a License Set -->
                <tr>
                    <td colspan="6">
                        <br />
                        <apex:commandLink value="+ Add Rate Section" action="{!addLicenseSet}" rendered="{! canEditPricing }" rerender="wholeServiceOrderForm"></apex:commandLink>
                        <br />
                    </td>
                </tr>
            </table>
        </apex:outputPanel>

        <!-- PDF & Non-Editable Rates for Products for non Pricing Team -->
        <apex:outputPanel rendered="{! !renderingAsHTML || !canEditPricing }">
            <table id="subscriptionTable">
                <col width="25%" />
                <col width="25%" />
                <col width="5%" />
                <col width="15%" />
                <col width="13%" />
                <col width="17%" />

                <tr>
                    <th class="center dark">Item</th>
                    <th class="center dark">Description</th>
                    <th class="center dark">Quantity</th>
                    <th class="center dark">Unit Price</th>
                    <th class="center dark">Subscription Term</th>
                    <th class="center dark">Total</th>
                </tr>

                <apex:repeat value="{!licenseData}" var="ld">
                    <apex:repeat value="{!ld.subscriptions}" var="sub">
                        <tr id='{!sub.id}_row' class="subs" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="subs-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center subs-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center subs-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center subs-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center subs-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center subs-table-total">{!sub.tsf}</td>
                        </tr>
                    </apex:repeat>
                    <apex:repeat value="{!ld.commitments}" var="sub">
                        <tr id='{!sub.id}_row' class="commit" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="commit-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center commit-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center commit-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center commit-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center commit-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center commit-table-total">{!sub.tsf}</td>
                        </tr>
                    </apex:repeat>
                    <apex:repeat value="{!ld.oneTimeCharges}" var="sub">
                        <tr id='{!sub.id}_row' class="once" data-associatedrate='{!sub.id}'>
                            <td name="{!sub.name}" class="once-table-name {!IF ((ld.isCustomName || sub.isCustomName) && renderingAsHTML, 'highlightOverride', '')}">
                                <strong>{!ld.name}</strong>
                                <br />{!sub.name}
                            </td>
                            <td name="{!sub.name}" class="center once-table-description">{!sub.description}</td>
                            <td name="{!sub.name}" class="center once-table-qty">{!sub.quantity}</td>
                            <td name="{!sub.name}" class="center once-table-ppu">
                                <span name="{!sub.name}" class="{!IF (sub.isOverridden && renderingAsHTML, 'highlightOverride', '')}">
                                    {!sub.ppu}
                                </span>
                                {!IF (sub.isOverridden && renderingAsHTML, ' ('+sub.originalRate+')', '')}
                            </td>
                            <td name="{!sub.name}" class="center once-table-term">{!termLength}</td>
                            <td name="{!sub.name}" class="center once-table-total">{!sub.totc}</td>
                        </tr>
                    </apex:repeat>
                </apex:repeat>

                <apex:repeat value="{!licenseData}" var="lic">
                    <tr id="{!lic.id}" class="{!IF ((!lic.hasRates && !lic.hasAccessTypes) || lic.isDisabled, 'hide', '')}">
                        <td colspan="6" name="{!lic.name}" class="rate-list-header {!IF (lic.isCustomName && renderingAsHTML, 'highlightOverride', '')}">
                            <h4>{!lic.name}</h4>
                        </td>
                    </tr>

                    <apex:repeat value="{!lic.rateGroupOrder}" rendered="{! !lic.isDisabled }" var="rtg">
                        <apex:repeat value="{!lic.rateGroups[rtg].rates}" var="rt">
                            <!-- Standard Rate List -->
                            <tr id='{!rt.id}_row' data-associatedrate="{!rt.associatedRate.Id}" class="rate-list-row {!IF (lic.isDisabled || rt.isDisabled, 'hide', '')}">
                                <td id="{!rt.id}" name="{!rt.name}" class="rate-list-name {!IF (rt.isCustomName && renderingAsHTML, 'highlightOverride', '')}">{!rt.name}</td>
                                <td id="{!rt.id}" name="{!rt.name}" class="rate-list-description {!IF (rt.isCustomDescription && renderingAsHTML, 'highlightOverride', '')}">{!rt.description}</td>
                                <td class="center rate-list-qty">N/A</td>
                                <td class="center rate-list-rate" id="{!rt.id}_rate" name="{!rt.name}">
                                    <apex:outputText >
                                        <span class="{!IF ((rt.isOverridden || rt.isCustomRecurrence) && renderingAsHTML, 'highlightOverride', '')}">
                                            {!rt.rate}
                                        </span>
                                        {!IF (rt.isOverridden && renderingAsHTML, ' ('+rt.originalRate+')', '')}
                                    </apex:outputText>
                                </td>
                                <td class="center rate-list-term">N/A</td>
                                <td class="center rate-list-total">N/A</td>
                            </tr>
                        </apex:repeat>
                    </apex:repeat>

                    <apex:repeat value="{!lic.accessTypeOrder}" rendered="{! !lic.isDisabled }" var="rtg">
                        <!-- International -->
                        <apex:repeat value="{!lic.accessTypes[rtg].gridData}" var="gridRates">
                            <apex:repeat value="{!gridRates.locationOrders}" var="loc">
                                <apex:repeat value="{!gridRates.accessTypes}" var="at">
                                    <apex:outputPanel layout="none" rendered="{! gridRates.hasGridData[loc][at] }">
                                        <tr class="rate-list-intl-row" data-location="{!loc}" data-accesstype="{!at}" data-associatedrate="{!gridRates.locations[loc][at].id}"
                                            id="{!gridRates.locations[loc][at].id}_row">
                                            <td id="{!gridRates.locations[loc][at].id}" class="rate-list-name">
                                                <!-- Access Type Rate Name -->
                                                {!at}
                                            </td>

                                            <!-- Access Type Description -->
                                            <td id="{!gridRates.locations[loc][at].id}_desc" class="rate-list-description">
                                                {!loc}
                                            </td>

                                            <td class="center rate-list-qty">N/A</td>

                                            <!-- Price and Recurrence -->
                                            <td class="center rate-list-rate rate-list-recurrence" id="{!gridRates.locations[loc][at].id}_rate">
                                                <apex:outputText >
                                                    <span class="{!IF ((gridRates.locations[loc][at].isOverridden) && renderingAsHTML, 'highlightOverride', '')}">
                                                        {!gridRates.locations[loc][at].rate}
                                                    </span>
                                                    / Minute {!IF (gridRates.locations[loc][at].isOverridden && renderingAsHTML, ' ('+gridRates.locations[loc][at].originalRate+')',
                                                    '')}
                                                </apex:outputText>
                                            </td>

                                            <td class="center rate-list-term">N/A</td>
                                            <td class="center rate-list-total">N/A</td>
                                        </tr>
                                    </apex:outputPanel>
                                </apex:repeat>
                            </apex:repeat>
                        </apex:repeat>
                    </apex:repeat>
                </apex:repeat>
            </table>
        </apex:outputPanel>
        <br />

        <!-- Total of Product information -->
        <table>
            <col width="60%" />
            <col width="20%" />
            <col width="20%" />
            <tr>
                <td class="no-border"></td>
                <th class="center">Total</th>
                <td class="center">{! quoteTotal}</td>
            </tr>
        </table>
        <br/>
        <hr />
        <br/>
        <!-- Added from RT-370 based on CGC Section Picklist Values -->
        <apex:repeat value="{!sortedContractVerbiage}" var="pv" rendered="{!!isQuote}">
            <apex:outputPanel rendered="{!pv.contractVerbiage.Contract_General_Content__r.Section__c != 'Services and Pricing Schedule'}">
                <div id='{!pv.originalId}' name='{!pv.contractVerbiage.Name}' class="verbiage product-verbiage {!IF (pv.isCustomVerbiage && renderingAsHTML, 'highlightOverride', '')}">
                    <apex:outputField value="{!pv.contractVerbiage.Verbiage__c}">
                        <apex:inlineEditSupport event="ondblClick" rendered="{! (canEditVerbiage || (canEditPricing && pv.contractVerbiage.Pricing_Team_Changes_Allowed__c)) }"
                        />
                    </apex:outputField>
                    <apex:outputPanel rendered="{! !renderingAsPDF}" styleClass="verbiage-comments">
                        <apex:outputField value="{!pv.contractVerbiage.Comments__c}" rendered="{! (renderingAsHtml && ((canEditVerbiage || (canEditPricing && pv.contractVerbiage.Pricing_Team_Changes_Allowed__c)))) || (renderingAsWord && !(pv.contractVerbiage.Comments__c == '' || pv.contractVerbiage.Comments__c == null)) }">
                            <apex:outputPanel layout="none" rendered="{! renderingAsHtml && ((canEditVerbiage || (canEditPricing && pv.contractVerbiage.Pricing_Team_Changes_Allowed__c))) && (pv.contractVerbiage.Comments__c == '' || pv.contractVerbiage.Comments__c == null) }">
                                Insert comments here...
                            </apex:outputPanel>
                            <apex:inlineEditSupport event="onClick" rendered="{! (canEditVerbiage || (canEditPricing && pv.contractVerbiage.Pricing_Team_Changes_Allowed__c)) }"
                            />
                        </apex:outputField>
                    </apex:outputPanel>
                </div>
            </apex:outputPanel>
        </apex:repeat>
        <!-- Additional Notes -->
        <table>
            <tr>
                <td class="Center" style="height:50px;width:15%">Additional Notes:</td>
                <td>
                    <apex:inputField style=" width: 100%; " value="{! contract.Quote_Additional_Notes__c}"></apex:inputField>
                </td>
            </tr>
        </table>

        <!-- Editable Signature Text -->
        <div class="noNewPage newPageAfter">

            <apex:repeat value="{!signingVerbiage}" var="sv">
                <div id='{!sv.originalId}' name='{!sv.contractVerbiage.Name}' class="verbiage front-page-verbiage {!IF (sv.isCustomVerbiage && renderingAsHTML, 'highlightOverride', '')}">
                    <apex:outputPanel rendered="{!sv.contractVerbiage.Show_Verbiage_Header__c == true}">
                        <h6>
                            <apex:outputField value="{!sv.contractVerbiage.Verbiage_Header__c}">
                            </apex:outputField>
                        </h6>
                    </apex:outputPanel>
                    <apex:outputField value="{!sv.contractVerbiage.Verbiage__c}">
                        <apex:inlineEditSupport event="ondblClick" rendered="{! canEditVerbiage || (canEditPricing && sv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                        />
                    </apex:outputField>
                    <apex:outputPanel rendered="{! !renderingAsPDF }" styleClass="verbiage-comments">
                        <apex:outputField value="{!sv.contractVerbiage.Comments__c}" rendered="{! (renderingAsHtml && (canEditVerbiage || (canEditPricing && sv.contractVerbiage.Pricing_Team_Changes_Allowed__c))) || (renderingAsWord && !(sv.contractVerbiage.Comments__c == '' || sv.contractVerbiage.Comments__c == null))}">
                            <apex:outputPanel layout="none" rendered="{! (canEditVerbiage || (canEditPricing && sv.contractVerbiage.Pricing_Team_Changes_Allowed__c)) && renderingAsHtml && (sv.contractVerbiage.Comments__c == '' || sv.contractVerbiage.Comments__c == null)}">
                                Insert comments here...
                            </apex:outputPanel>
                            <apex:inlineEditSupport event="onClick" rendered="{! canEditVerbiage || (canEditPricing && sv.contractVerbiage.Pricing_Team_Changes_Allowed__c) }"
                            />
                        </apex:outputField>
                    </apex:outputPanel>
                </div>
            </apex:repeat>
            <table>
                <col width="10%" />
                <col width="40%" />
                <col width="10%" />
                <col width="40%" />
                <tr style='height:18px'>
                    <td class="right td-header dark">Customer:</td>
                    <td width="10%"></td>
                    <td class="right td-header dark">PGi:</td>
                    <td width="10%"></td>
                </tr>
                <tr style='height:18px'>
                    <td id='signingCompanyName' colspan='2' width="40%" class="center td-header dark">
                        {!agreementAccountName}
                    </td>
                    <td id="pgiName" colspan='2' class="center td-header dark">{! pgiName }</td>
                </tr>
                <tr style='height:40px'>
                    <td class="right td-header dark">Signature:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*Sig_es_:signer:signature}}</span>
                    </td>
                    <td class="right td-header dark">Signature:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*Sig_es_:signer2:signature}}</span>
                    </td>
                </tr>
                <tr style='height:40px'>
                    <td class="right td-header dark">Name:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*N_es_:signer:fullname}}</span>
                    </td>
                    <td class="right td-header dark">Name:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*N_es_:signer2:fullname}}</span>
                    </td>
                </tr>
                <tr style='height:40px'>
                    <td class="right td-header dark">Title:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*Ttl_es_:signer:title}}</span>
                    </td>
                    <td class="right td-header dark">Title:</td>
                    <td width="10%" class="center esigntag esignsignature">
                        <span style="color:#fff">{{*Ttl_es_:signer2:title}}</span>
                    </td>
                </tr>
                <tr style='height:18px'>
                    <td class="right td-header dark">Date:</td>
                    <td width="40%" class="center esigntag">
                        <span style="color:#fff">{{*Dte_es_:signer:date}}</span>
                    </td>
                    <td class="right td-header dark">Date:</td>
                    <td width="40%" class="center esigntag">
                        <span style="color:#fff">{{*Dte_es_:signer2:date}}</span>
                    </td>
                </tr>
            </table>
        </div>


        <center>
            <h4>
                Thank you for your business!
            </h4>
        </center>
    </apex:form>
</apex:page>