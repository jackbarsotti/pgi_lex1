<apex:page standardController="FoxDen_Box__c" extensions="FoxDenBoxController" showHeader="true" docType="html-5.0">  
  <apex:stylesheet value="{!URLFOR($Resource.RTResources, 'css/jquery-ui.min.css')}"/>
  <apex:includeScript value="{!URLFOR($Resource.RTResources, 'js/jquery.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.RTResources, 'js/jquery-ui.min.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.RTResources, 'js/messaging.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.RTResources, 'js/remoting.js')}"/>
  <apex:includeScript value="{!URLFOR($Resource.RTResources, 'js/contactProvisionHelper.js')}"/>

  <script>    
    $(document).ready(function(){  
      if('{!isDelete}' === 'true'){

        $.showDialog('.message-dialog', 'Deleting...', {
          "Cancel": function(){                        
            location.href='/{!boxId}';
          }
        });
        
        $('.warnMessage').html('Deleting FoxDen Box... <img src="/resource/RTResources/images/spinner.gif"/>');
        $('.warnMessages').show();  

        FoxDenBoxController.customDelete('{!boxId}', function(result,event){
          if($.handleRemotingResult(result,event)){
            $('.warnMessage').html('Deleted');
            $('.warnMessages').show();            
            location.href="/{!boxId}";
          }
        });
      }
    });
  </script>  


  <apex:outputPanel id="message-dialog" styleClass="message-dialog" layout="block">         
    <div class="ui-state-highlight ui-corner-all warnMessages" style="padding: 0 .7em .0 .7em; margin-bottom: 5px; display: none"> 
      <p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span><span class="warnMessage"></span></p>
    </div>
    <div class="ui-state-error ui-corner-all errorMessages" style="padding: 0 .7em 0 .7em; margin-bottom: 5px; display: none"> 
      <p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span><span class="errorMessage"></span></p>
    </div>
  </apex:outputPanel>  

</apex:page>