<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PGi_Renewal_Opportunity_Required_Fields</fullName>
    <active>true</active>
    <description>Use Case, Red Flags, Strategy, Next Steps  all required when stage starts with 00, A or B</description>
    <errorConditionFormula>AND( 
$User.ProfileId &lt;&gt; &quot;00e30000001kms9&quot;, 
$User.ProfileId &lt;&gt; &quot;00e1B0000028723&quot;,
$User.ProfileId &lt;&gt; &quot;00ea0000001sYR8&quot;,
$User.Override_Validation_Rules__c = False, 
RecordType.Name = &quot;PGi Renewal Opportunity&quot;, 
OR(
ISPICKVAL( StageName , &quot;00 - Confirmed Cancellation&quot;),
ISPICKVAL( StageName , &quot;A High Risk&quot;),
ISPICKVAL( StageName , &quot;B Recovery Plan&quot;),
ISPICKVAL( StageName , &quot;A - High Risk&quot;),
ISPICKVAL( StageName , &quot;B - Recovery Plan&quot;)),
OR(
ISBLANK(Use_Case_Description__c),
ISBLANK(Red_Flags__c),
ISBLANK(Strategy__c),
ISBLANK(NextStep))
)</errorConditionFormula>
    <errorMessage>The following fields are required: 
Use Case Description, Red Flags, Strategy, Next Step</errorMessage>
</ValidationRule>
