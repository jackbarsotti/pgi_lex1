<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PGi_Won_Reason_Required</fullName>
    <active>true</active>
    <description>If Stage is set to Closed Won then Won reason is required</description>
    <errorConditionFormula>AND(
RecordType.Name = &quot;PGi Opportunity&quot;, 
$User.ProfileId &lt;&gt; &quot;00e30000001kms9&quot;, 
CONTAINS(TEXT(StageName), &quot;Closed Won&quot;)||
ISPICKVAL( StageName , &quot;Closed Pending Approval&quot;), 
ISPICKVAL( Primary_Won_Reason__c  ,&quot;&quot;), 
$User.Override_Validation_Rules__c = False,
$User.ProfileId &lt;&gt; &quot;00ea0000001sYR8&quot;,
$User.ProfileId &lt;&gt; &quot;00ea0000001sdEo&quot;,
NOT($Setup.BypassRules__c.Disable_Validation_Rules__c) 
)</errorConditionFormula>
    <errorDisplayField>Primary_Won_Reason__c</errorDisplayField>
    <errorMessage>Please select the Won Reason when setting the stage to Closed Won.</errorMessage>
</ValidationRule>
