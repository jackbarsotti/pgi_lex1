<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>iMC_Commission_Accelerator</fullName>
        <field>Accelerator__c</field>
        <formula>Commission_Payee__r.Commission_Accelerator__c</formula>
        <name>iMC - Commission, Accelerator</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>iMC_Commission_Amount</fullName>
        <description>This will populate the amount with the Including Accelerator.</description>
        <field>Commission_Amount__c</field>
        <formula>Including_Accelerator__c</formula>
        <name>iMC - Commission, Amount</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>iMC_Commission_Commission_Date</fullName>
        <field>Commission_Date__c</field>
        <formula>Close_Date__c</formula>
        <name>iMC - Commission, Commission Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>iMC_Commission_Commissionable_Amount</fullName>
        <field>Commissionable_Amount__c</field>
        <formula>IF(Implementation__c, 
Opportunity__r.Implementation_Bookings__c, 
IF(Opportunity_Type__c = &quot;Professional Services&quot; , 
Opportunity__r.Professional_Services_Bookings__c, 
Opportunity__r.First_Year_License_Amount__c 
)
)</formula>
        <name>iMC - Commission, Commissionable Amount</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>iMC_Commission_Rate</fullName>
        <field>Rate_Percent__c</field>
        <formula>Commission_Payee__r.Commission_Base__c</formula>
        <name>iMC - Commission, Rate</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>iMC_Commission_Status</fullName>
        <field>Status__c</field>
        <literalValue>Paid</literalValue>
        <name>iMC - Commission, Status</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
    </fieldUpdates>
    <rules>
        <fullName>iMC - Commission%2C Accelerator %26 Rate</fullName>
        <actions>
            <name>iMC_Commission_Accelerator</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>iMC_Commission_Rate</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <description>Accelerator and Rate fields to be populated from Commission Payee record.</description>
        <formula>True</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>iMC - Commission%2C Amount</fullName>
        <actions>
            <name>iMC_Commission_Amount</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Commission__c.Commission_Amount__c</field>
            <operation>equals</operation>
            <value>,USD 0</value>
        </criteriaItems>
        <criteriaItems>
            <field>Opportunity.RecordTypeId</field>
            <operation>equals</operation>
            <value>iMC Opportunity,iMC Renewal Opportunity</value>
        </criteriaItems>
        <description>This will populate the Commission Amount if the field is empty.</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>iMC - Commission%2C Commison  Date</fullName>
        <actions>
            <name>iMC_Commission_Commission_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Commission__c.Commission_Date__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Opportunity.RecordTypeId</field>
            <operation>equals</operation>
            <value>iMC Opportunity,iMC Renewal Opportunity</value>
        </criteriaItems>
        <description>This will populate the Commission Date if the field is empty.</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>iMC - Commission%2C Commissionable Amount</fullName>
        <actions>
            <name>iMC_Commission_Commissionable_Amount</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Commission__c.Commissionable_Amount__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Opportunity.RecordTypeId</field>
            <operation>equals</operation>
            <value>iMC Opportunity,iMC Renewal Opportunity</value>
        </criteriaItems>
        <description>This will populate the Commissionable Amount if the field is empty.</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>iMC - Commission%2C Status</fullName>
        <actions>
            <name>iMC_Commission_Status</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Commission__c.Paid_Date__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Commission__c.Status__c</field>
            <operation>equals</operation>
            <value>Approved &amp; Reviewed</value>
        </criteriaItems>
        <criteriaItems>
            <field>Opportunity.RecordTypeId</field>
            <operation>equals</operation>
            <value>iMC Opportunity,iMC Renewal Opportunity</value>
        </criteriaItems>
        <description>This will update the Commission Status when the Paid Date is added.</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
