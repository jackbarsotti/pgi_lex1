<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>RT_ChangeRecordTypetoDeleted</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Deleted</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Change RecordType to Deleted</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_DepartmentActive</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Provisioned</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Department Active</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_DepartmentError</fullName>
        <field>RecordTypeId</field>
        <lookupValue>OnError</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Department Error</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_DeptProvisionedRecordTypePending</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Pending</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Dept Provisioned RecordType Pending</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_DeptUpdateRTbasedonStatus</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Pending</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Dept Update RT based on Status</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_MakeDeptPending</fullName>
        <description>When the provision checkbox is first checked, dept is provisioned, but is pending in the interim</description>
        <field>RecordTypeId</field>
        <lookupValue>Pending</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>RT_Make Dept Pending</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>RT_ProvisionCheckedinPending</fullName>
        <description>When provision checkbox is first checked, dept is pending until provisioning happens (which, for dept, is simply saving the dept out to billing)</description>
        <field>Status__c</field>
        <literalValue>Pending</literalValue>
        <name>RT_Provision Checked, in Pending</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
    </fieldUpdates>
    <outboundMessages>
        <fullName>BBS_Department_Outbound</fullName>
        <apiVersion>27.0</apiVersion>
        <endpointUrl>https://provision.ecovate.com/bbs-provisioning/inboundGateway</endpointUrl>
        <fields>Add_Emails__c</fields>
        <fields>Additional_email_addresses__c</fields>
        <fields>BBS_AccountGroupId__c</fields>
        <fields>BBS_CoreOrgId__c</fields>
        <fields>BBS_CoreStatus__c</fields>
        <fields>BBS_StatusMessage__c</fields>
        <fields>BBS_Status__c</fields>
        <fields>City__c</fields>
        <fields>Contact__c</fields>
        <fields>Country__c</fields>
        <fields>CreatedById</fields>
        <fields>CreatedDate</fields>
        <fields>Date_Deleted__c</fields>
        <fields>Date_Provisioned__c</fields>
        <fields>Id</fields>
        <fields>Inactivated_By__c</fields>
        <fields>Inactive__c</fields>
        <fields>IsDeleted</fields>
        <fields>Kit_Name__c</fields>
        <fields>Kit_Number__c</fields>
        <fields>LastActivityDate</fields>
        <fields>LastModifiedById</fields>
        <fields>LastModifiedDate</fields>
        <fields>Linked__c</fields>
        <fields>Name</fields>
        <fields>Org_ID__c</fields>
        <fields>OwnerId</fields>
        <fields>Parent_Account_Number__c</fields>
        <fields>Parent_Account__c</fields>
        <fields>Postal_Code__c</fields>
        <fields>Provision__c</fields>
        <fields>RecordTypeId</fields>
        <fields>SF_Account_ID__c</fields>
        <fields>Send_Welcome_Kit__c</fields>
        <fields>Send_provisioning_email__c</fields>
        <fields>Ship_to_Name__c</fields>
        <fields>Shipping_Address_2__c</fields>
        <fields>Shipping_Address__c</fields>
        <fields>Start_Page__c</fields>
        <fields>State__c</fields>
        <fields>Status_Description__c</fields>
        <fields>Status__c</fields>
        <fields>SugarID__c</fields>
        <fields>SystemModstamp</fields>
        <fields>Toll_Free_Number__c</fields>
        <includeSessionId>false</includeSessionId>
        <integrationUser>rtsfsherpa@readytalk.com</integrationUser>
        <name>BBS Department Outbound</name>
        <protected>false</protected>
        <useDeadLetterQueue>false</useDeadLetterQueue>
    </outboundMessages>
    <rules>
        <fullName>Fire Department Outbound</fullName>
        <actions>
            <name>BBS_Department_Outbound</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>ReadyTalk</description>
        <formula>AND
(Provision__c = TRUE,
!ISPICKVAL(Status__c, &apos;Deleting&apos;),
 $User.ReadyTalk_Exempt__c = FALSE
)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>RT_Department Active</fullName>
        <actions>
            <name>RT_DepartmentActive</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Department__c.Status__c</field>
            <operation>equals</operation>
            <value>Active</value>
        </criteriaItems>
        <description>Set recordtype to active</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>RT_Department Deleted%2C Change RecordType</fullName>
        <actions>
            <name>RT_ChangeRecordTypetoDeleted</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Department__c.Status__c</field>
            <operation>equals</operation>
            <value>Deleted,Delete</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>RT_Department Error</fullName>
        <actions>
            <name>RT_DepartmentError</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Department__c.Status__c</field>
            <operation>equals</operation>
            <value>AddError,SyncError,UpdateError,DeleteError</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>RT_Provision Checked%2C in Pending</fullName>
        <actions>
            <name>RT_MakeDeptPending</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>RT_ProvisionCheckedinPending</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Department__c.Provision__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <description>When the provision checkbox is checked for the first time, the status of the dept is pending</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
</Workflow>
