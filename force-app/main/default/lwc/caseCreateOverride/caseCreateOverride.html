<template>
    <lightning-card title="Case Details">
        <template if:true={record}>
            <template if:true={fieldDetails}>
                <template if:true={layoutsection}>
                    <template if:true={isNew}>
                    <lightning-accordion active-section-name="QuickCase Templete">
                        <lightning-accordion-section name="QuickCase Templete" label="QuickCase Templete">
                            <div class="slds-size_1-of-2 slds-align_absolute-center">
                                <lightning-combobox label="Would you like to select a quick case?" name="quickCase"
                                    onchange={handleCaseTemplateChange} options={quickCaseListOption}
                                    placeholder="--None--" value={selectedCaseTemplate}></lightning-combobox><br />
                            </div>
                        </lightning-accordion-section>
                    </lightning-accordion>
                  </template>
                    <lightning-accordion allow-multiple-sections-open active-section-name={sectionHeading}
                        onsectiontoggle={handleSectionToggle}>
                        <template for:each={layoutsection} for:item="sections">
                            <lightning-accordion-section key={sections.sectionHeader} name={sections.sectionHeader}
                                label={sections.sectionHeader}>
                                <!-- To display Fields -->
                                <div key={layoutItems} class="slds-grid slds-wrap">
                                <template for:each={sections.sectionDetails} for:item="layoutItems">
                                    
                                            <template if:true={layoutItems.editableForNew}>
                                                    <div key={layoutItemApi} class="slds-size_1-of-2 " style="padding-right: 109px;padding-left: 84px">
                                                        <c-case-form-fields data-id={layoutItems.apiName}
                                                            record-type-id={recordTypeId} record={record}
                                                            fld-api={layoutItems.apiName}
                                                            field-details={fieldDetails}
                                                            is-new ={isNew}
                                                            onmycustomevent={handleCustomEvent}>
                                                        </c-case-form-fields>
                                                    </div>
                                            </template>
                                    
                                </template>
                                
                            </div>
                            <br key={sections.sectionHeader} />
                                <!-- End -->
                            </lightning-accordion-section>
                        </template>

                    </lightning-accordion>
                </template>
            </template>
        </template>
        <template if:true={requiredCaseComment}>
            <lightning-accordion active-section-name="New Case Comment">
                <lightning-accordion-section name="New Case Comment" label="New Case Comment">
                    <div class="slds-align_absolute-center" >
                    <lightning-textarea name="New Case Comment" class="inputCmp" value={caseCommentValue}
                        onchange={handleCommentChange} label="Case Comment" maxlength="300">
                    </lightning-textarea>
                </div>
                </lightning-accordion-section>
            </lightning-accordion>
        </template>
        
            <lightning-accordion active-section-name="Optional">
                <lightning-accordion-section name="Optional" label="Optional">
                    <div class="slds-size_1-of-2 slds-align_absolute-center">
                        <lightning-input type="checkbox" class="inputCmp" name="Assignment rule" label="Assignment rule" checked={isFireAssRule}
                        onchange={handleOnAssRuleChange} >
                    </lightning-input>
                </div>
                </lightning-accordion-section>
            </lightning-accordion>
        </br>
    </br>
        <!-- <div  class="slds-align_absolute-center">
            <lightning-button label="Save" onclick={handleSave}></lightning-button>
            <lightning-button label="Cancel" onclick={handleCancel}></lightning-button>
        </div> -->
        <footer class="slds-model_footer slds-align_absolute-center slds-docked-form-footer">
            <lightning-button variant="brand" label="Save" title="save" onclick={handleSave}
                class="slds-m-right_x-small">
            </lightning-button>
            <lightning-button variant="brand" label="Cancel" title="cancel" onclick={handleCancel}>
            </lightning-button>
        </footer>
    </lightning-card>
</template>